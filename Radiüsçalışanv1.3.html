<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Alyans Geometri – Yüzdeli Bombe</title>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}

.header{
  background:#000;
  padding:14px 0 10px;
  text-align:center;
}

.box{background:#fff;padding:12px;margin:12px;border-radius:8px}
input{width:100%;padding:6px;margin-bottom:6px}
button{width:100%;padding:10px;font-size:16px}
.err{color:#b00020;font-weight:bold}
.ok{color:#0a7a0a;font-weight:bold}
.small{font-size:13px;color:#555}
</style>
</head>

<body>

<!-- HEADER + TEKNİK KESİT LOGO -->
<div class="header">
<svg width="180" height="90" viewBox="0 0 360 180"
     xmlns="http://www.w3.org/2000/svg">

  <!-- üst bombe -->
  <path d="M60 80 A120 60 0 0 1 300 80"
        fill="none" stroke="white" stroke-width="5"/>

  <!-- iç bombe -->
  <path d="M110 80 A70 30 0 0 0 250 80"
        fill="none" stroke="white" stroke-width="5"/>

  <!-- sol yan düz -->
  <line x1="60" y1="80" x2="110" y2="80"
        stroke="white" stroke-width="5"/>

  <!-- sağ yan düz -->
  <line x1="250" y1="80" x2="300" y2="80"
        stroke="white" stroke-width="5"/>

  <!-- merkez referans çizgisi -->
  <line x1="180" y1="35" x2="180" y2="115"
        stroke="white" stroke-width="2"
        stroke-dasharray="6,6"/>

  <!-- OB imza -->
  <text x="180" y="155"
        text-anchor="middle"
        font-size="36"
        font-family="Arial, Helvetica, sans-serif"
        font-weight="700"
        fill="white">OB</text>
</svg>
</div>

<h2 style="text-align:center;margin:10px 0">Alyans Geometri – Yüzdeli Bombe</h2>

<div class="box">
<b>Ürün</b><br>
Genişlik w (mm) <input id="w" type="number" step="0.01">
Kalınlık t (mm) <input id="t" type="number" step="0.01">
Yan hedef (ops.) <input id="yan_in" type="number" step="0.01">
</div>

<div class="box">
<b>Bombe Yüzdeleri</b><br>
Üst bombe (%) <input id="pct_out" type="number" step="1" value="50">
İç bombe (%) <input id="pct_in" type="number" step="1" value="50">
<div class="small">(Yan hedef giriliyse geçerlidir – toplam %100 olmalı)</div>
</div>

<div class="box">
<b>Üst Bombe</b><br>
c (mm) <input id="c_out" type="number" step="0.01">
R (mm) <input id="R_out" type="number" step="0.01">
h (mm) <input id="h_out" type="number" step="0.01">
</div>

<div class="box">
<b>İç Bombe</b><br>
c (mm) <input id="c_in" type="number" step="0.01">
R (mm) <input id="R_in" type="number" step="0.01">
h (mm) <input id="h_in" type="number" step="0.01">
</div>

<button onclick="hesapla()">HESAPLA</button>

<div id="sonuc" class="box"></div>

<script>
function hFromRC(R,c){
  return R - Math.sqrt(R*R - (c/2)*(c/2));
}
function rFromHC(h,c){
  return (c*c)/(8*h) + h/2;
}

function hesapla(){
  const err=[];
  const w=+wEl.value;
  let t = tEl.value==='' ? null : +tEl.value;
  const yanTarget = yanEl.value==='' ? null : +yanEl.value;

  const pctOut = +pctOutEl.value;
  const pctIn  = +pctInEl.value;

  let c_out=+cOutEl.value||0, R_out=+ROutEl.value||0, h_out=+hOutEl.value||0;
  let c_in =+cInEl.value ||0, R_in =+RInEl.value ||0, h_in =+hInEl.value ||0;

  if(!(w>0)) err.push("w pozitif olmalı");
  if(c_out>w && c_out>0) err.push("Üst bombe c > w olamaz");
  if(c_in >w && c_in >0) err.push("İç bombe c > w olamaz");

  if(t===null){
    if(yanTarget!==null && (h_out||h_in)){
      t = yanTarget + h_out + h_in;
    }else{
      err.push("t boş");
    }
  }

  if(yanTarget!==null){
    if(pctOut + pctIn !== 100){
      err.push("Bombe yüzdeleri toplamı %100 olmalı");
    }else{
      const toplamH = t - yanTarget;
      if(toplamH < 0) err.push("Yan hedef t'den büyük olamaz");
      h_out = toplamH * (pctOut/100);
      h_in  = toplamH * (pctIn /100);
    }
  }

  if(c_out && R_out && !h_out) h_out = hFromRC(R_out,c_out);
  if(c_in  && R_in  && !h_in ) h_in  = hFromRC(R_in ,c_in );

  if(c_out && h_out && !R_out) R_out = rFromHC(h_out,c_out);
  if(c_in  && h_in  && !R_in ) R_in  = rFromHC(h_in ,c_in );

  const yan = t - (h_out + h_in);
  if(yan < 0) err.push("Yan negatife düştü");

  if(err.length){
    sonuc.innerHTML = `<div class="err">⛔ Hatalar:<br>• ${err.join("<br>• ")}</div>`;
    return;
  }

  sonuc.innerHTML =
    `<div class="ok">✔ Geometri geçerli</div>`+
    `Kalınlık t: ${t.toFixed(2)} mm<br>`+
    `Üst bombe h: ${h_out.toFixed(3)} mm | R: ${R_out.toFixed(2)} mm<br>`+
    `İç bombe h: ${h_in.toFixed(3)} mm | R: ${R_in.toFixed(2)} mm<br>`+
    `<b>Yan duvar: ${yan.toFixed(2)} mm</b>`;
}

const wEl = document.getElementById("w");
const tEl = document.getElementById("t");
const yanEl = document.getElementById("yan_in");
const pctOutEl = document.getElementById("pct_out");
const pctInEl  = document.getElementById("pct_in");
const cOutEl = document.getElementById("c_out");
const ROutEl = document.getElementById("R_out");
const hOutEl = document.getElementById("h_out");
const cInEl  = document.getElementById("c_in");
const RInEl  = document.getElementById("R_in");
const hInEl  = document.getElementById("h_in");
const sonuc = document.getElementById("sonuc");
</script>

</body>
</html>